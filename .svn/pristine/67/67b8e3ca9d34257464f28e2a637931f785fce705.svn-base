import React, { useEffect, useState, useRef } from 'react';
import ParkingCameraStream from './ParkingCameraStream';

export default function ParkingCamera({ parkingCameras, parkingCamera, socketClient, socketCameraRef, handleConnectSocket, handleDisconnectSocket, parkingCoordsData }) {

	useEffect(() => {
		return () => {
			console.log('unmount');
		}
	}, [])

	if (parkingCameras) {
		return parkingCameras.map((parkingCamera) => {
			return <div key={parkingCamera.idx}>
				<ParkingCameraStream
					cameraId={parkingCamera.camera_id}
					socket={socketClient}
					socketCameraRef={socketCameraRef}
					handleConnectSocket={handleConnectSocket}
					handleDisconnectSocket={handleDisconnectSocket}
					parkingCoordsData={parkingCoordsData}
				/>
			</div>
		})
	} else if (parkingCamera) {
		return <div>
			<ParkingCameraStream
				oneCamera
				cameraId={parkingCamera.camera_id}
				socket={socketClient}
				socketCameraRef={socketCameraRef}
				handleConnectSocket={handleConnectSocket}
				handleDisconnectSocket={handleDisconnectSocket}
				parkingCoordsData={parkingCoordsData}
			/>
		</div>
	}
}