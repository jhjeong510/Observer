import React, { useState, useEffect } from 'react';
import { Modal, Button, Form } from 'react-bootstrap';
import { setAcknowledge } from '../../dashboard/api/apiService';
import { UserInfoContext } from '../../context/context';

export default function HandleAcknowledgeEventModal({ show, setShow, message, title, callback, clickPoint, selectObject, floorImageLists }) {
   const contextType = UserInfoContext;
   const handleConfirm = () => {
      const device_id = selectObject.data.device_id;
      const device_type = selectObject.data.device_type;
      const service_type = selectObject.data.service_type;
      try {
         setAcknowledge({
            device_id,
            device_type,
            service_type,
            acknowledge_user: contextType && contextType._currentValue.id
         })
      } catch (err) {
         console.log('이벤트 확인 처리 오류: ', err);
      }
      handleCancel();
   }
   const handleCancel = () => {
      setShow({ show: false });
   }

   return (
      <div className='HandleAcknowledgeEventModal'>
         {show ?
            <Modal show={show} onHide={handleCancel} animation={true}>
               <Modal.Header>
                  <Modal.Title>{title}</Modal.Title>
               </Modal.Header>
               <Modal.Body>{message}</Modal.Body>
               <Modal.Footer>
                  <Button variant="primary" onClick={handleConfirm}>
                     확인
                  </Button>
                  <Button variant="secondary" onClick={handleCancel}>
                     취소
                  </Button>
               </Modal.Footer>
            </Modal>
            :
            ''
         }
      </div>
   )
}